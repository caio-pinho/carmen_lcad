pytorch version = 1.7.1+cu110

dataset_output_consolidado = 30098 (finaliza com dataset_trechos_sentido_antihorario_compilados.txt, 20834 linhas), começa pelo volta_sentido_horario.
falta 9264 linhas;
dataset_output = 9264 linhas (só 1 comando). diferença para o próximo: retirou a última linha e a primeira linha
dataset_output_volta_completa_sentido_horario = 9266 linhas (já ta ok, linhas que sobraram podem ser utilizadas)

tratar linhas que não condizem com os dados corretos: 13365,14198,20155,20988

phi positivo vira pra esquerda (em relação a frente do carro), phi negativo vira pra direita

Valores extremos de phi encontrados no dataset: -0.524, 0.463

linha de exemplo de curva: linha 8712
input: 
7757820.897	-363527.889	-0.488	5.556	7757799.261	 -363522.265	-0.024	5.563	-0.057
output:
5.563	-0.057	0.020	5.563	-0.057	0.020	5.563	-0.057	0.020	5.563	-0.056	0.020	5.563	-0.056	0.020	5.563	-0.056	0.020	5.563	-0.056	0.020	5.563	-0.056	0.020	5.563	-0.056	0.020	5.563	-0.056	0.020	5.563	-0.056	0.020	5.563	-0.056	0.020	5.563	-0.056	0.020	5.563	-0.056	0.020	5.563	-0.056	0.020	5.563	-0.056	0.020	5.563	-0.056	0.020	5.563	-0.055	0.020	5.563	-0.055	0.020	5.563	-0.055	0.020	5.562	-0.055	0.020	5.562	-0.055	0.020	5.562	-0.055	0.020	5.562	-0.055	0.020	5.562	-0.055	0.020	5.562	-0.055	0.020	5.562	-0.055	0.020	5.562	-0.055	0.020	5.562	-0.055	0.020	5.562	-0.055	0.020	5.562	-0.055	0.020	5.562	-0.055	0.020	5.562	-0.055	0.020	5.562	-0.055	0.020	5.562	-0.054	0.020	5.562	-0.054	0.020	5.562	-0.054	0.020	5.562	-0.054	0.020	5.562	-0.054	0.020	5.562	-0.054	0.020	5.562	-0.054	0.020	5.562	-0.054	0.020	5.562	-0.054	0.020	5.562	-0.054	0.020	5.562	-0.054	0.020	5.562	-0.054	0.020	5.561	-0.054	0.020	5.561	-0.054	0.020	5.561	-0.054	0.020	5.561	-0.054	0.020	5.561	-0.054	0.020	5.561	-0.054	0.020	5.561	-0.054	0.020	5.561	-0.054	0.020	5.561	-0.054	0.020	5.561	-0.054	0.020	5.561	-0.054	0.020	5.561	-0.054	0.020	5.561	-0.053	0.020	5.561	-0.053	0.020	5.561	-0.053	0.020	5.561	-0.053	0.020	5.561	-0.053	0.020	5.561	-0.053	0.020	5.561	-0.053	0.020	5.561	-0.053	0.020	5.561	-0.053	0.020	5.561	-0.053	0.020	5.561	-0.053	0.020	5.561	-0.053	0.020	5.561	-0.053	0.020	5.561	-0.053	0.020	5.561	-0.053	0.020	5.560	-0.053	0.060	5.560	-0.053	0.060	5.560	-0.053	0.060	5.560	-0.053	0.060	5.560	-0.053	0.060	5.560	-0.053	0.060	5.560	-0.053	0.060	5.560	-0.053	0.060	5.559	-0.053	0.060	5.559	-0.053	0.060	5.559	-0.053	0.060	5.559	-0.053	0.060	5.559	-0.053	0.060	5.559	-0.053	0.060	5.559	-0.053	0.060	5.559	-0.053	0.060	5.559	-0.053	0.060	5.558	-0.053	0.060	5.558	-0.054	0.060	5.558	-0.054	0.060	5.558	-0.054	0.060	5.558	-0.054	0.060	5.558	-0.054	0.060	5.558	-0.054	0.060	5.558	-0.054	0.060	5.558	-0.054	0.060	5.557	-0.054	0.060	5.557	-0.054	0.060	5.557	-0.054	0.060	5.557	-0.054	0.060	5.557	-0.054	0.060	5.557	-0.054	0.060	5.557	-0.054	0.060	5.557	-0.054	0.060	5.556	-0.054	0.060	5.556	-0.055	0.060	5.556	-0.055	0.060	5.556	-0.055	0.060	5.556	-0.055	0.060	5.556	-0.055	0.060	5.556	-0.055	0.060	5.556	-0.055	0.060	5.556	-0.055	0.060


optimizer_prints_estudo_phi_copia_verificar_curva = curva na linha A9662672

optimizer_prints_estudo_phi_comandos_NMP_sem_travar_v = exemplo bom na linha 1054943 (já tem velocidade atual > 0).Outro exemplo linha 888687, exatamente antes de iniciar o movimento.

optimizer_prints_estudo_phi_comandos_spline = linha A2928666 exatamente antes de iniciar o movimento.


input/output:linha de exemplo reta antes de entrar na curva = 8559
input:
7757779.374	-363526.234	0.419	5.261	7757755.251	 -363542.285	0.658	7.217	-0.002
output (378 dados, 126 comandos):
7.217	-0.002	0.020	7.209	-0.002	0.020	7.200	-0.002	0.020	7.192	-0.002	0.020	7.184	-0.002	0.020	7.175	-0.002	0.020	7.167	-0.002	0.020	7.158	-0.002	0.020	7.150	-0.002	0.020	7.141	-0.002	0.020	7.133	-0.002	0.020	7.125	-0.002	0.020	7.116	-0.003	0.020	7.108	-0.003	0.020	7.099	-0.003	0.020	7.091	-0.003	0.020	7.082	-0.003	0.020	7.074	-0.003	0.020	7.066	-0.003	0.020	7.057	-0.003	0.020	7.049	-0.003	0.020	7.040	-0.003	0.020	7.032	-0.003	0.020	7.023	-0.003	0.020	7.015	-0.003	0.020	7.007	-0.003	0.020	6.998	-0.003	0.020	6.990	-0.003	0.020	6.981	-0.003	0.020	6.973	-0.003	0.020	6.964	-0.003	0.020	6.956	-0.004	0.020	6.948	-0.004	0.020	6.939	-0.004	0.020	6.931	-0.004	0.020	6.922	-0.004	0.020	6.914	-0.004	0.020	6.905	-0.004	0.020	6.897	-0.004	0.020	6.889	-0.004	0.020	6.880	-0.004	0.020	6.872	-0.004	0.020	6.863	-0.005	0.020	6.855	-0.005	0.020	6.846	-0.005	0.020	6.838	-0.005	0.020	6.830	-0.005	0.020	6.821	-0.005	0.020	6.813	-0.005	0.020	6.804	-0.005	0.020	6.796	-0.005	0.020	6.788	-0.006	0.020	6.779	-0.006	0.020	6.771	-0.006	0.020	6.762	-0.006	0.020	6.754	-0.006	0.020	6.745	-0.006	0.020	6.737	-0.007	0.020	6.729	-0.007	0.020	6.720	-0.007	0.020	6.712	-0.007	0.020	6.703	-0.007	0.020	6.695	-0.007	0.020	6.686	-0.008	0.020	6.678	-0.008	0.020	6.670	-0.008	0.020	6.661	-0.008	0.020	6.653	-0.008	0.020	6.644	-0.009	0.020	6.636	-0.009	0.020	6.627	-0.009	0.020	6.619	-0.009	0.020	6.611	-0.010	0.020	6.585	-0.010	0.060	6.560	-0.011	0.060	6.535	-0.012	0.060	6.509	-0.013	0.060	6.484	-0.013	0.060	6.459	-0.014	0.060	6.434	-0.015	0.060	6.408	-0.016	0.060	6.383	-0.017	0.060	6.358	-0.018	0.060	6.333	-0.018	0.060	6.307	-0.019	0.060	6.282	-0.020	0.060	6.257	-0.021	0.060	6.231	-0.022	0.060	6.206	-0.023	0.060	6.181	-0.023	0.060	6.156	-0.024	0.060	6.130	-0.025	0.060	6.105	-0.026	0.060	6.080	-0.027	0.060	6.054	-0.028	0.060	6.029	-0.028	0.060	6.004	-0.029	0.060	5.979	-0.030	0.060	5.953	-0.031	0.060	5.928	-0.031	0.060	5.903	-0.032	0.060	5.878	-0.033	0.060	5.852	-0.034	0.060	5.827	-0.034	0.060	5.802	-0.035	0.060	5.776	-0.036	0.060	5.751	-0.037	0.060	5.726	-0.037	0.060	5.701	-0.038	0.060	5.675	-0.039	0.060	5.650	-0.039	0.060	5.625	-0.040	0.060	5.599	-0.041	0.060	5.574	-0.041	0.060	5.549	-0.042	0.060	5.524	-0.043	0.060	5.498	-0.043	0.060	5.473	-0.044	0.060	5.448	-0.045	0.060	5.423	-0.045	0.060	5.397	-0.046	0.060	5.372	-0.047	0.060	5.347	-0.048	0.060	5.321	-0.048	0.060	5.296	-0.049	0.060	5.271	-0.050	0.060
Simulado no ./test com os valores de input acima, gerou o phi bem próximo de 0 em todos os comandos (não gerou curva de -0.06 ou algo parecido).

input/output: linha de exemplo de totalmente reta = 8508
input:
7757764.077	-363535.602	0.647	6.392	7757738.784	 -363555.009	0.664	8.341	-0.002
output:
8.341	-0.002	0.020	8.333	-0.002	0.020	8.324	-0.002	0.020	8.315	-0.002	0.020	8.306	-0.002	0.020	8.298	-0.002	0.020	8.289	-0.002	0.020	8.280	-0.002	0.020	8.272	-0.002	0.020	8.263	-0.002	0.020	8.254	-0.002	0.020	8.245	-0.002	0.020	8.237	-0.002	0.020	8.228	-0.002	0.020	8.219	-0.002	0.020	8.210	-0.002	0.020	8.202	-0.002	0.020	8.193	-0.002	0.020	8.184	-0.002	0.020	8.175	-0.002	0.020	8.167	-0.002	0.020	8.158	-0.002	0.020	8.149	-0.002	0.020	8.140	-0.002	0.020	8.132	-0.002	0.020	8.123	-0.002	0.020	8.114	-0.002	0.020	8.106	-0.002	0.020	8.097	-0.002	0.020	8.088	-0.002	0.020	8.079	-0.002	0.020	8.071	-0.002	0.020	8.062	-0.002	0.020	8.053	-0.002	0.020	8.044	-0.002	0.020	8.036	-0.002	0.020	8.027	-0.002	0.020	8.018	-0.002	0.020	8.009	-0.002	0.020	8.001	-0.002	0.020	7.992	-0.002	0.020	7.983	-0.002	0.020	7.975	-0.002	0.020	7.966	-0.002	0.020	7.957	-0.002	0.020	7.948	-0.002	0.020	7.940	-0.002	0.020	7.931	-0.002	0.020	7.922	-0.002	0.020	7.913	-0.002	0.020	7.905	-0.002	0.020	7.896	-0.002	0.020	7.887	-0.002	0.020	7.878	-0.002	0.020	7.870	-0.002	0.020	7.861	-0.002	0.020	7.852	-0.002	0.020	7.843	-0.002	0.020	7.835	-0.002	0.020	7.826	-0.002	0.020	7.817	-0.002	0.020	7.809	-0.002	0.020	7.800	-0.002	0.020	7.791	-0.002	0.020	7.782	-0.002	0.020	7.774	-0.002	0.020	7.765	-0.002	0.020	7.756	-0.002	0.020	7.747	-0.002	0.020	7.739	-0.002	0.020	7.730	-0.002	0.020	7.721	-0.002	0.020	7.712	-0.002	0.020	7.686	-0.002	0.060	7.660	-0.002	0.060	7.634	-0.002	0.060	7.608	-0.001	0.060	7.581	-0.001	0.060	7.555	-0.001	0.060	7.529	-0.001	0.060	7.503	-0.001	0.060	7.477	-0.001	0.060	7.450	-0.001	0.060	7.424	-0.001	0.060	7.398	-0.001	0.060	7.372	-0.001	0.060	7.346	-0.001	0.060	7.319	-0.001	0.060	7.293	-0.001	0.060	7.267	-0.001	0.060	7.241	-0.001	0.060	7.215	-0.001	0.060	7.188	-0.001	0.060	7.162	-0.000	0.060	7.136	-0.000	0.060	7.110	-0.000	0.060	7.083	-0.000	0.060	7.057	-0.000	0.060	7.031	-0.000	0.060	7.005	-0.000	0.060	6.979	-0.000	0.060	6.952	-0.000	0.060	6.926	-0.000	0.060	6.900	-0.000	0.060	6.874	-0.000	0.060	6.848	-0.000	0.060	6.821	-0.000	0.060	6.795	-0.000	0.060	6.769	-0.000	0.060	6.743	-0.000	0.060	6.717	-0.000	0.060	6.690	-0.001	0.060	6.664	-0.001	0.060	6.638	-0.001	0.060	6.612	-0.001	0.060	6.586	-0.001	0.060	6.559	-0.001	0.060	6.533	-0.001	0.060	6.507	-0.001	0.060	6.481	-0.001	0.060	6.455	-0.001	0.060	6.428	-0.001	0.060	6.402	-0.001	0.060

	//x.push_back(GlobalState::goal_pose->x);
	//x.push_back(GlobalState::goal_pose->y);
	x.push_back(GlobalState::goal_pose->theta);
	x.push_back(GlobalState::robot_config.max_v);
	//x.push_back(GlobalState::localizer_pose->x);
	//x.push_back(GlobalState::localizer_pose->y);
	x.push_back(GlobalState::localizer_pose->theta);
	x.push_back(GlobalState::last_odometry.v);
	if (GlobalState::last_odometry.v > 0.0)
		x.push_back(GlobalState::last_odometry.phi);
	else
		x.push_back(0.0);
	x.push_back(fabs(GlobalState::goal_pose->x-GlobalState::localizer_pose->x));
	x.push_back(fabs(GlobalState::goal_pose->y-GlobalState::localizer_pose->y));

A primeira sessão de gerar comandos não roda pois o v = v0 = 0 sempre (se não tiver incrementando o t, o v0 não vai aumentar).
Na segunda sessão como utiliza o tt para calcular o v = v0, há incremento do valor.

A linha do path até o goal não precisa da segunda sessão.
Se colocar valor de phi exagerado, não gera linha, mas se forçar o valor do phi = 0 ele gera a linha mesmo sem o gsl_spline_eval(precisa estar com o for do t, com o for do k não gera a linha).
Provavelmente avalia se o phi é válido para aquele goal. Com for t < 0.3 não gerou a linha, provavelmente não tem a quantidade de comandos para ir até o goal e formar a linha.
Com t < 5 a quantidade de comandos foi suficiente e gerou a linha!

Testar se vai gerar a linha com um unico comando com o tempo total.
Testar se com o for do k porém com um k que aproxime do tt, vai gerar a linha.

